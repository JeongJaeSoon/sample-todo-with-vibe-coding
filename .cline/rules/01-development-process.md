# 開発プロセスガイド

## 基本原則

- このプロジェクトはpnpmを使用します
- ソースコードを最優先で参照してください
- 既存のコードパターンと一貫性を保ってください
- TDD(テスト駆動開発)方式に従います - テストを先に書いてから実装を進めます

## 重要なコマンド

- 開発サーバー起動: `pnpm start`
- テスト実行: `pnpm test`
- テスト監視モード: `pnpm test -- --watch`
- ビルド: `pnpm build`
- Lint: `pnpm lint`

## 作業順序

1. **プロジェクト理解**
   - ソースコードの確認
   - 各ディレクトリのREADME.mdの参照

2. **テスト作成(TDD)**
   - 失敗するテストから始める（`Red`フェーズ）
   - `pnpm test`でテストを実行し、失敗を確認

3. **コーディング**
   - テストを通過する最小限のコードを作成（`Green`フェーズ）

4. **リファクタリング**
   - コードの改善と整理（`Refactor`フェーズ）
   - テストが依然として通過することを確認
   - コード品質の向上と重複の削除

5. **コード検証**
   - `pnpm test`で全てのテストが通過することを確認
   - `pnpm lint`でコード品質を検査

6. **コミット**
   - Conventional Commits形式に従う
   - コミット前にlintとテストを実行

## TDD実践方法

### 基本サイクル

1. **Red**: 失敗するテストを書く
2. **Green**: テストが通る最小限のコードを実装
3. **Refactor**: コードを改善（テストは引き続き通ることを確認）

### テスト作成ルール

- テストファイルは対象と同じディレクトリに配置
- コンポーネント: `*.test.tsx`
- ユーティリティ: `*.test.ts`
- カバレッジ目標: 80%以上
- テスト実行: `pnpm test`

### テスト対象

1. **コンポーネント**
   - 正しいレンダリング
   - プロップスの検証
   - ユーザーイベント
   - エラー状態

2. **ユーティリティ関数**
   - 入力値の境界値
   - エッジケース
   - 例外処理

### TDD実践のポイント

- 機能を実装する前に必ずテストコードを作成します
- Red-Green-Refactorサイクルに従います
- 小さな単位でテストと実装を繰り返します
- テストカバレッジを継続的にモニタリングします
- テストファイルは対応するコードと同じディレクトリに配置し、`.test.ts`または`.spec.ts`という命名規則に従います

## 作業の進め方

- 作業を開始する前に、最新のmainブランチをpullしてください
- 作業を開始する前に、新しいブランチを作成してください
- 何を実装するかを明確にし、ドキュメントに記録してください
- 常にテストコードを先に作成し、失敗することを確認してから実装を進めてください
- 作業完了後、作業した内容を notes に日付単位でまとめてください

## ドキュメント構成

### ディレクトリ構造

- **/notes**: 作業メモ（日付単位）
  - 形式: `YYYY-MM-DD-タイトル.md`

- **/docs**: プロジェクト関連ドキュメント
  - セットアップガイド、デプロイ手順など
  - PRD / Design Docs

- **/spec**: アプリケーション仕様関連ドキュメント
  - 要件定義書
  - 画面設計書
  - API仕様書
  - データモデル設計書

### ドキュメント作成のポイント

1. **簡潔さ**
   - 必要な情報のみを記載
   - 箇条書きを活用

2. **最新の状態を維持**
   - 変更があれば速やかに更新

3. **標準フォーマット**
   - Markdownを使用
   - 見出しレベルを適切に使用

## コミットメッセージ規約

[Conventional Commits](https://www.conventionalcommits.org/ja/v1.0.0/) 形式に従ってコミットメッセージを作成してください。

```text
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

### 主要なタイプ

- **feat**: 新機能
- **fix**: バグ修正
- **docs**: ドキュメントの変更
- **style**: コードの意味に影響しない変更
- **refactor**: バグ修正や機能追加ではないコード変更
- **test**: テストの追加・修正
- **chore**: ビルドプロセスやドキュメント生成などの変更
